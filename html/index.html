<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/impressConsole.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="presentation.css" media="all"></link><link rel="stylesheet" href="presentation.css" media="screen,projection"></link></head><body class="impress-not-supported"><div id="impress" data-transition-duration="2000"><div class="step step-level-1" step="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><p>Sabato 24 Ottobre</p><h1 id="ldroma15">#LDROMA15</h1><p><a href="http://lug.uniroma2.it/ld15/">http://lug.uniroma2.it/ld15/</a></p></div><div class="step step-level-1" step="1" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="all-ombra-del-leviatano">All'ombra del Leviatano</h1></div><div class="step step-level-1" step="2" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><p><a href="https://robertoreale.me/linux-day-2015">https://robertoreale.me/linux-day-2015</a></p></div><div class="step step-level-1" step="3" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="file-e-filesystem">File e filesystem</h1></div><div class="step step-level-1" step="4" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><blockquote><p>Die Dataien hat der liebe Gott gemacht, alles andere ist Menschenwerk.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Leopold Kronecker (apocrifo)</cite></div></div><div class="step step-level-1" step="5" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><p><em>file</em> is the new <em>byte</em></p></div><div class="step step-level-1" step="6" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><blockquote><p>All files are created equal.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Anonimo</cite></div></div><div class="step step-level-1" step="7" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><blockquote><p>Everything is a file.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Anonimo</cite></div></div><div class="step step-level-1" step="8" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><blockquote><p>All file systems are not created equal.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>11th USENIX Symposium on Operating Systems Design and Implementation (OSDI 14)</cite></div></div><div class="step step-level-1" step="9" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><h1 id="fondazioni">Fondazioni</h1></div><div class="step step-level-1" step="10" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><blockquote><p>For most users, the filesystem is <em>the most visible aspect of an operating system</em>.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Silberschatz &amp; Galvin, Operating System Concepts, 7th ed.</cite></div></div><div class="step step-level-1" step="11" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><blockquote><p>The filesystem consists of two distinct parts: a <em>collection of files</em>, each storing related data, and a <em>directory structure</em>, which organizes and provides information about all the files in the system.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Silberschatz &amp; Galvin, Operating System Concepts, 7th ed.</cite></div></div><div class="step step-level-1" step="12" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><blockquote><p>The most important job of UNIX is to provide a filesystem.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Ritchie &amp; Thompson, The UNIX TimeSharing System</cite></div></div><div class="step step-level-1" step="13" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><blockquote><p>A file contains whatever information the user places on it, for example symbolic or binary (object) programs.</p><p><em>No particular structuring is expected by the system.</em></p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Ritchie &amp; Thompson, The UNIX TimeSharing System</cite></div></div><div class="step step-level-1" step="14" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><blockquote><p>A file does not exist within a particular directory; the directory entry for a file consists merely of its name and a pointer to the information actually describing the file.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Ritchie &amp; Thompson, The UNIX TimeSharing System</cite></div></div><div class="step step-level-1" step="15" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><blockquote><p>There is a threefold advantage in treating I/O devices this way: file and device I/O are as similar as possible; file and device names have the same syntax and meaning, so that a program expecting a file name as a parameter can be passed a device name; finally, special files are subject to the same protection mechanism as regular files.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Ritchie &amp; Thompson, The UNIX TimeSharing System</cite></div></div><div class="step step-level-1" step="16" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><blockquote><p>Perhaps paradoxically, the success of UNIX is largely due to the fact that it was not designed to meet any predefined objectives.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Ritchie &amp; Thompson, The UNIX TimeSharing System</cite></div></div><div class="step step-level-1" step="17" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><h1 id="precisazioni">Precisazioni</h1></div><div class="step step-level-1" step="18" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><blockquote><p>The whole point with "everything is a file" is not that you have some random filename, but the fact that <em>you can use common tools to operate on different things</em>.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Linux Torvalds, 8 giugno 2002</cite></div></div><div class="step step-level-1" step="19" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><blockquote><p>The UNIX philosophy is often quoted as "everything is a file", but that really means <em>everything is a stream of bytes</em>.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Linux Torvalds, 8 marzo 2007</cite></div></div><div class="step step-level-1" step="20" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><blockquote><p>It should be just a "read()", and then <em>people can use general libraries and treat all sources the same</em>.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Linux Torvalds, 8 marzo 2007</cite></div></div><div class="step step-level-1" step="21" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><h1 id="il-paradosso">Il paradosso</h1></div><div class="step step-level-1" step="22" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><p>everything is a file</p><p><em>ma</em></p><p>il perimetro di cosa &#xE8; un file non &#xE8; flessible ad libitum</p></div><div class="step step-level-1" step="23" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><p>il perimetro di cosa &#xE8; un file &#xE8;</p><p><em>fissato dal kernel</em></p></div><div class="step step-level-1" step="24" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><p>la <em>sintassi</em> e la <em>semantica</em> del filesystem sono fissate dal kernel</p></div><div class="step step-level-1" step="25" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><h1 id="il-leviatano">Il Leviatano</h1></div><div class="step step-level-1" step="26" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><blockquote><p>VFS: oltre 65 mila righe di codice gi&#xE0; nel 2008</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Galloway et al., Model-Checking the Linux Virtual File System</cite></div></div><div class="step step-level-1" step="27" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><blockquote><p>approccio conservativo</p><p>kernel-centrico</p></blockquote></div><div class="step step-level-1" step="28" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><blockquote><p>debug difficile</p></blockquote></div><div class="step step-level-1" step="29" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><blockquote><p>l'utente non amministratore semplicemente <em>non pu&#xF2;</em></p></blockquote></div><div class="step step-level-1" step="30" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="48000" data-y="0" data-z="0"><blockquote><p>ecce spes eius frustrabitur eum et videntibus cunctis praecipitabitur</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Iob, 41, 1</cite></div></div><div class="step step-level-1" step="31" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="49600" data-y="0" data-z="0"><h1 id="vfs">VFS</h1></div><div class="step step-level-1" step="32" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="51200" data-y="0" data-z="0"><p>Astrazione</p><blockquote><p>File: modello comune</p><p>Strutture dati: superblock, inode, file, dentry</p><p>Operazioni</p><p>Object-oriented</p></blockquote></div><div class="step step-level-1" step="33" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="52800" data-y="0" data-z="0"><p>Implementazione</p><blockquote><p>Disk data structures</p><p>Memory data structures</p><p>Disk space management</p></blockquote></div><div class="step step-level-1" step="34" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="54400" data-y="0" data-z="0"><p>Precursori</p><blockquote><p>Earlier VFS implementations include Sun's VFS (in SunOS version 2.0, circa 1985) and IBM and Microsoft's "Installable File System" for IBM OS/2.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>M. Tim Jones, Anatomy of the Linux virtual filesystem switch</cite></div></div><div class="step step-level-1" step="35" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="56000" data-y="0" data-z="0"><h1 id="altre-strade">Altre strade</h1></div><div class="step step-level-1" step="36" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="57600" data-y="0" data-z="0"><p>Synthetic Files</p></div><div class="step step-level-1" step="37" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="59200" data-y="0" data-z="0"><p><em>9P</em>: Plan 9 Filesystem Protocol</p></div><div class="step step-level-1" step="38" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="60800" data-y="0" data-z="0"><p><em>puffs</em>: Pass-to-Userspace Framework File System su NetBSD</p></div><div class="step step-level-1" step="39" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="62400" data-y="0" data-z="0"><blockquote><p>A filesystem is a protocol translator: it interprets incoming requests and transforms them into a form suitable to store and retrieve data.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite>Antti Kantee, Send and Receive of File System Protocols</cite></div></div><div class="step step-level-1" step="40" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="64000" data-y="0" data-z="0"><h1 id="hurd-translators">Hurd translators</h1></div><div class="step step-level-1" step="41" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="65600" data-y="0" data-z="0"><blockquote><p>A translator is simply a normal program acting as an object server and participating in the Hurd's distributed virtual filesystem.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://www.gnu.org/software/hurd/hurd/translator.html">https://www.gnu.org/software/hurd/hurd/translator.html</a></cite></div></div><div class="step step-level-1" step="42" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="67200" data-y="0" data-z="0"><blockquote><p>It is so-called because it typically exports a filesystem (although need not: cf. auth, proc and pfinet) and thus translates object invocations into calls appropriate for the backing store (e.g., ext2 filesystem, nfs server, etc.).</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://www.gnu.org/software/hurd/hurd/translator.html">https://www.gnu.org/software/hurd/hurd/translator.html</a></cite></div></div><div class="step step-level-1" step="43" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="68800" data-y="0" data-z="0"><blockquote><p>Another way of putting it is that it translates from one representation of a data structure into another representation, for example from the on-disk ext2 data layout to a traditional filesystem hierarchy, or from a XML file to a virtual hierarchical manifestation.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://www.gnu.org/software/hurd/hurd/translator.html">https://www.gnu.org/software/hurd/hurd/translator.html</a></cite></div></div><div class="step step-level-1" step="44" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="70400" data-y="0" data-z="0"><blockquote><p>A translator is usually registered with a specific filesystem node by using the settrans command.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://www.gnu.org/software/hurd/hurd/translator.html">https://www.gnu.org/software/hurd/hurd/translator.html</a></cite></div></div><div class="step step-level-1" step="45" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="72000" data-y="0" data-z="0"><blockquote><p>Translators do not require any special privilege to run. The privilege they require is simply that to access the indiviudal resources they use.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://www.gnu.org/software/hurd/hurd/translator.html">https://www.gnu.org/software/hurd/hurd/translator.html</a></cite></div></div><div class="step step-level-1" step="46" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="73600" data-y="0" data-z="0"><h1 id="fuse">FUSE</h1><h1 id="filesystem-in-userspace">Filesystem in Userspace</h1></div><div class="step step-level-1" step="47" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="75200" data-y="0" data-z="0"><img src="images/fuse_structure.png"></img></div><div class="step step-level-1" step="48" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="76800" data-y="0" data-z="0"><blockquote><p>With FUSE it is possible to implement a fully functional filesystem in a userspace program.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/">http://fuse.sourceforge.net/</a></cite></div></div><div class="step step-level-1" step="49" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="78400" data-y="0" data-z="0"><p>Autore Miklos Szeredi</p><p>Licenze GPL + LGPL</p></div><div class="step step-level-1" step="50" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="80000" data-y="0" data-z="0"><p>Features include...</p></div><div class="step step-level-1" step="51" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="81600" data-y="0" data-z="0"><blockquote><p>simple library API</p></blockquote></div><div class="step step-level-1" step="52" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="83200" data-y="0" data-z="0"><blockquote><p>simple installation (no need to patch or recompile the kernel)</p></blockquote></div><div class="step step-level-1" step="53" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="84800" data-y="0" data-z="0"><blockquote><p>secure implementation</p></blockquote></div><div class="step step-level-1" step="54" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="86400" data-y="0" data-z="0"><blockquote><p>userspace-kernel interface is very efficient</p></blockquote></div><div class="step step-level-1" step="55" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="88000" data-y="0" data-z="0"><blockquote><p>usable by non privileged users</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/">http://fuse.sourceforge.net/</a></cite></div></div><div class="step step-level-1" step="56" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="89600" data-y="0" data-z="0"><p>Interazione attraverso un file (ancora!): <em>/dev/fuse</em>.</p></div><div class="step step-level-1" step="57" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="91200" data-y="0" data-z="0"><blockquote><p>FUSE is a userspace filesystem framework.  It consists of a kernel module (fuse.ko), a userspace library (libfuse.*) and a mount utility (fusermount).</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="58" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="92800" data-y="0" data-z="0"><blockquote><p>One of the most important features of FUSE is allowing secure, non-privileged mounts.  This opens up new possibilities for the use of filesystems.  A good example is sshfs: a secure network filesystem using the sftp protocol.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="59" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="94400" data-y="0" data-z="0"><blockquote><p>Since the mount() system call is a privileged operation, a helper program (fusermount) is needed, which is installed setuid root.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="60" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="96000" data-y="0" data-z="0"><h1 id="vocabolario">Vocabolario</h1></div><div class="step step-level-1" step="61" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="97600" data-y="0" data-z="0"><p>Userspace filesystem</p><blockquote><p>A filesystem in which data and metadata are provided by an ordinary userspace process.  The filesystem can be accessed normally through the kernel interface.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="62" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="99200" data-y="0" data-z="0"><p>Filesystem daemon</p><blockquote><p>The process(es) providing the data and metadata of the filesystem.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="63" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="100800" data-y="0" data-z="0"><p>Non-privileged mount (or user mount)</p><blockquote><p>A userspace filesystem mounted by a non-privileged (non-root) user.  The filesystem daemon is running with the privileges of the mounting user.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="64" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="102400" data-y="0" data-z="0"><p>Filesystem connection</p><blockquote><p>A connection between the filesystem daemon and the kernel.  The connection exists until either the daemon dies, or the filesystem is umounted.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="65" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="104000" data-y="0" data-z="0"><p>Mount owner</p><blockquote><p>The user who does the mounting.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="66" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="105600" data-y="0" data-z="0"><p>User</p><blockquote><p>The user who is performing filesystem operations.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://fuse.sourceforge.net/doxygen/index.html">http://fuse.sourceforge.net/doxygen/index.html</a></cite></div></div><div class="step step-level-1" step="67" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="107200" data-y="0" data-z="0"><h1 id="hello-c">hello.c</h1></div><div class="step step-level-1" step="68" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="108800" data-y="0" data-z="0"><pre class="highlight code c"><span class="cm">/*
  FUSE: Filesystem in Userspace
  Copyright (C) 2001-2007  Miklos Szeredi &lt;miklos@szeredi.hu&gt;
  This program can be distributed under the terms of the GNU GPL.
  See the file COPYING.
*/</span>
<span class="cp">#define FUSE_USE_VERSION 30
#include</span> <span class="cpf">&lt;fuse.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;errno.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
</span><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">hello_str</span> <span class="o">=</span> <span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">hello_path</span> <span class="o">=</span> <span class="s">"/hello"</span><span class="p">;</span></pre></div><div class="step step-level-1" step="69" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="110400" data-y="0" data-z="0"><pre class="highlight code c"><span class="k">static</span> <span class="kt">int</span> <span class="nf">hello_getattr</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="k">struct</span> <span class="n">stat</span> <span class="o">*</span><span class="n">stbuf</span><span class="p">)</span>
<span class="p">{</span>
        <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">stbuf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">stat</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"/"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">stbuf</span><span class="o">-&gt;</span><span class="n">st_mode</span> <span class="o">=</span> <span class="n">S_IFDIR</span> <span class="o">|</span> <span class="mo">0755</span><span class="p">;</span>
                <span class="n">stbuf</span><span class="o">-&gt;</span><span class="n">st_nlink</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">hello_path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">stbuf</span><span class="o">-&gt;</span><span class="n">st_mode</span> <span class="o">=</span> <span class="n">S_IFREG</span> <span class="o">|</span> <span class="mo">0444</span><span class="p">;</span>
                <span class="n">stbuf</span><span class="o">-&gt;</span><span class="n">st_nlink</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="n">stbuf</span><span class="o">-&gt;</span><span class="n">st_size</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">hello_str</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span>
                <span class="n">res</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENOENT</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span></pre></div><div class="step step-level-1" step="70" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="112000" data-y="0" data-z="0"><pre class="highlight code c"><span class="k">static</span> <span class="kt">int</span> <span class="nf">hello_readdir</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">fuse_fill_dir_t</span> <span class="n">filler</span><span class="p">,</span>
                         <span class="kt">off_t</span> <span class="n">offset</span><span class="p">,</span> <span class="k">struct</span> <span class="n">fuse_file_info</span> <span class="o">*</span><span class="n">fi</span><span class="p">)</span>
<span class="p">{</span>
        <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">offset</span><span class="p">;</span>
        <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">fi</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"/"</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">return</span> <span class="o">-</span><span class="n">ENOENT</span><span class="p">;</span>
        <span class="n">filler</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="s">"."</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">filler</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="s">".."</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">filler</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">hello_path</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></pre></div><div class="step step-level-1" step="71" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="113600" data-y="0" data-z="0"><pre class="highlight code c"><span class="k">static</span> <span class="kt">int</span> <span class="nf">hello_open</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="k">struct</span> <span class="n">fuse_file_info</span> <span class="o">*</span><span class="n">fi</span><span class="p">)</span>
<span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">hello_path</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">return</span> <span class="o">-</span><span class="n">ENOENT</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">fi</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="n">O_RDONLY</span><span class="p">)</span>
                <span class="k">return</span> <span class="o">-</span><span class="n">EACCES</span><span class="p">;</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></pre></div><div class="step step-level-1" step="72" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="115200" data-y="0" data-z="0"><pre class="highlight code c"><span class="k">static</span> <span class="kt">int</span> <span class="nf">hello_read</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="kt">off_t</span> <span class="n">offset</span><span class="p">,</span>
                      <span class="k">struct</span> <span class="n">fuse_file_info</span> <span class="o">*</span><span class="n">fi</span><span class="p">)</span>
<span class="p">{</span>
        <span class="kt">size_t</span> <span class="n">len</span><span class="p">;</span>
        <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">fi</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">hello_path</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">return</span> <span class="o">-</span><span class="n">ENOENT</span><span class="p">;</span>
        <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">hello_str</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">+</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">len</span><span class="p">)</span>
                        <span class="n">size</span> <span class="o">=</span> <span class="n">len</span> <span class="o">-</span> <span class="n">offset</span><span class="p">;</span>
                <span class="n">memcpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">hello_str</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span>
                <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">size</span><span class="p">;</span>
<span class="p">}</span></pre></div><div class="step step-level-1" step="73" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="116800" data-y="0" data-z="0"><pre class="highlight code c"><span class="k">static</span> <span class="k">struct</span> <span class="n">fuse_operations</span> <span class="n">hello_oper</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">.</span><span class="n">getattr</span>        <span class="o">=</span> <span class="n">hello_getattr</span><span class="p">,</span>
        <span class="p">.</span><span class="n">readdir</span>        <span class="o">=</span> <span class="n">hello_readdir</span><span class="p">,</span>
        <span class="p">.</span><span class="n">open</span>           <span class="o">=</span> <span class="n">hello_open</span><span class="p">,</span>
        <span class="p">.</span><span class="n">read</span>           <span class="o">=</span> <span class="n">hello_read</span><span class="p">,</span>
<span class="p">};</span></pre></div><div class="step step-level-1" step="74" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="118400" data-y="0" data-z="0"><pre class="highlight code c"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
        <span class="k">return</span> <span class="n">fuse_main</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hello_oper</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span></pre></div><div class="step step-level-1" step="75" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="120000" data-y="0" data-z="0"><h1 id="bestiario">Bestiario</h1></div><div class="step step-level-1" step="76" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="121600" data-y="0" data-z="0"><p>PNGdrive</p><blockquote><p>PNG meets Steganography meets Fuse: the easiest way to have plausible deniability.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://code.google.com/p/pngdrive/">https://code.google.com/p/pngdrive/</a></cite></div></div><div class="step step-level-1" step="77" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="123200" data-y="0" data-z="0"><p>GlusterFS</p><blockquote><p>GlusterFS is a scalable network filesystem.  Using common off-the-shelf hardware, you can create large, distributed storage solutions for media streaming, data analysis, and other data- and bandwidth-intensive tasks.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://www.gluster.org/">http://www.gluster.org/</a></cite></div></div><div class="step step-level-1" step="78" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="124800" data-y="0" data-z="0"><p>WikipediaFS</p><blockquote><p>WikipediaFS is a virtual filesystem which allows users to view and edit Wikipedia articles as if they were real files on a local disk drive.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://en.wikipedia.org/wiki/WikipediaFS">https://en.wikipedia.org/wiki/WikipediaFS</a></cite></div></div><div class="step step-level-1" step="79" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="126400" data-y="0" data-z="0"><p>Couchfuse</p><blockquote><p>Couchfuse is a FUSE filesystem that exposes Couchdb databases as filesystem folder.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="http://narkisr.github.io/couch-fuse/">http://narkisr.github.io/couch-fuse/</a></cite></div></div><div class="step step-level-1" step="80" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="128000" data-y="0" data-z="0"><p>CephFS</p><blockquote><p>FUSE come <em>vivaio</em>, come <em>coltura</em> di giovani filesystem.</p><p>CephFS &#xE8; nel kernel dalla versione 2.6.34.</p></blockquote></div><div class="step step-level-1" step="81" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="129600" data-y="0" data-z="0"><h1 id="incarnazioni">Incarnazioni</h1></div><div class="step step-level-1" step="82" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="131200" data-y="0" data-z="0"><p>GO-FUSE</p><blockquote><p>As fast as libfuse using the gc compiler for single threaded loads.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://github.com/hanwen/go-fuse">https://github.com/hanwen/go-fuse</a></cite></div></div><div class="step step-level-1" step="83" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="132800" data-y="0" data-z="0"><p>Fuse4js</p><blockquote><p>Fuse4js currently implements a subset of all FUSE file operations.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://github.com/bcle/fuse4js">https://github.com/bcle/fuse4js</a></cite></div></div><div class="step step-level-1" step="84" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="134400" data-y="0" data-z="0"><p>fusepy</p><blockquote><p>Simple ctypes bindings for FUSE.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://github.com/linux-day-2015/fusepy">https://github.com/linux-day-2015/fusepy</a></cite></div></div><div class="step step-level-1" step="85" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="136000" data-y="0" data-z="0"><h1 id="mani-in-pasta">Mani in pasta</h1></div><div class="step step-level-1" step="86" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="137600" data-y="0" data-z="0"><p>elfs</p><blockquote><p>A simple (FUSE) filesystem on top of ELF objects.</p><p>Autore: Guillaume Leconte</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://github.com/robertoreale/elfs">https://github.com/robertoreale/elfs</a></cite></div></div><div class="step step-level-1" step="87" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="139200" data-y="0" data-z="0"><pre class="highlight ">$ elfs `which fdup` /tmp/elf

$ ls -l /tmp/elf/
total 0
drw-r--r-- 1 root root 0 Jan  1  1970 header
drw-r--r-- 1 root root 0 Jan  1  1970 libs
drw-r--r-- 1 root root 0 Jan  1  1970 sections</pre></div><div class="step step-level-1" step="88" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="140800" data-y="0" data-z="0"><p>Prospettive</p><blockquote><p>estensione ad altri formati binari</p><p>astrazione dal formato</p><p>interfaccia verso exec()</p></blockquote></div><div class="step step-level-1" step="89" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="142400" data-y="0" data-z="0"><p>fusepy</p><blockquote><p>Simple ctypes bindings for FUSE.</p><p>Autore: Terence Honles</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://github.com/robertoreale/fusepy">https://github.com/robertoreale/fusepy</a></cite></div></div><div class="step step-level-1" step="90" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="144000" data-y="0" data-z="0"><p>factors: un divertissement</p><blockquote><p>Ammette solo, come nomi di cartelle, <em>numeri interi</em>, e le popola di file pari ai <em>fattori</em>.</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://github.com/robertoreale/fusepy/blob/master/examples/factors.py">https://github.com/robertoreale/fusepy/blob/master/examples/factors.py</a></cite></div></div><div class="step step-level-1" step="91" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="145600" data-y="0" data-z="0"><pre class="highlight ">$ mkdir /tmp/loopback /tmp/mountpoint
$ sudo ./factors.py /tmp/loopback /tmp/mountpoint &amp;</pre><pre class="highlight ">$ sudo mkdir /tmp/mountpoint/54334
$ ls /tmp/mountpoint/54334
1  14  2  27167  3881  54334  7  7762</pre></div><div class="step step-level-1" step="92" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="147200" data-y="0" data-z="0"><p>etcd-fs</p><blockquote><p>A replicated filesystem on top of etcd.</p><p>Autore: Jonathan Leibiusky</p></blockquote><div class="cite"><span class="cite_label">Source: </span><cite><a href="https://github.com/robertoreale/etcd-fs">https://github.com/robertoreale/etcd-fs</a></cite></div></div><div class="step step-level-1" step="93" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="148800" data-y="0" data-z="0"><h1 id="colofone">Colof&#xF3;ne</h1><p>Presentazione composta con vim e Hovercraft! su Ubuntu Saucy.</p><p>Featuring Google Fonts: Libre Baskerville, Racing Sans One, Satisfy.</p></div><div class="step step-level-1" step="94" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="150400" data-y="0" data-z="0"><h1 id="exit">exit()</h1></div><div class="step step-level-1" step="95" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="152000" data-y="0" data-z="0"><p>Roberto Reale</p><p><a href="https://robertoreale.me/linux-day-2015">https://robertoreale.me/linux-day-2015</a></p></div></div><div id="hovercraft-help" class="hide"><table><tr><th>Space</th><td>Forward</td></tr><tr><th>Right, Down, Page Down</th><td>Next slide</td></tr><tr><th>Left, Up, Page Up</th><td>Previous slide</td></tr><tr><th>P</th><td>Open presenter console</td></tr><tr><th>H</th><td>Toggle this help</td></tr></table></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/impressConsole.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>